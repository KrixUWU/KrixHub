local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

local function setupCharacter(char)
    local HRP = char:WaitForChild("HumanoidRootPart")
    local Hum = char:WaitForChild("Humanoid")

    RunService.RenderStepped:Connect(function()
        if _G.tpWalkEnabled then
            local dir = Hum.MoveDirection

            if dir.Magnitude > 0 then
                HRP.CFrame = CFrame.new(HRP.Position, HRP.Position + dir)
                HRP.CFrame = HRP.CFrame + dir * _G.speed
            end
        end
    end)
end

player.CharacterAdded:Connect(setupCharacter)
if player.Character then setupCharacter(player.Character) end

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = playerGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 80, 0, 60) -- 2x mniejsze
Frame.Position = UDim2.new(0, 0, 0.4, 0)
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local UIStroke = Instance.new("UIStroke", Frame)
UIStroke.Thickness = 1
UIStroke.Color = Color3.fromRGB(0, 255, 0)

local title = Instance.new("TextLabel", Frame)
title.Size = UDim2.new(1, 0, 0, 12)
title.BackgroundTransparency = 1
title.Text = "TPW"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true

local Toggle = Instance.new("TextButton", Frame)
Toggle.Size = UDim2.new(1, -10, 0, 15)
Toggle.Position = UDim2.new(0, 5, 0, 15)
Toggle.Text = "OFF"
Toggle.TextScaled = true
Toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
Toggle.BorderSizePixel = 0

local SpeedBox = Instance.new("TextBox", Frame)
SpeedBox.Size = UDim2.new(1, -10, 0, 15)
SpeedBox.Position = UDim2.new(0, 5, 0, 35)
SpeedBox.PlaceholderText = "Speed"
SpeedBox.ClearTextOnFocus = false
SpeedBox.TextScaled = true
SpeedBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.BorderSizePixel = 0

_G.tpWalkEnabled = false
_G.speed = 2

Toggle.MouseButton1Click:Connect(function()
    _G.tpWalkEnabled = not _G.tpWalkEnabled
    Toggle.Text = _G.tpWalkEnabled and "ON" or "OFF"
end)

SpeedBox.FocusLost:Connect(function()
    local val = tonumber(SpeedBox.Text)
    if val then
        _G.speed = val
    else
        SpeedBox.Text = ""
        SpeedBox.PlaceholderText = "??"
    end
end)
